---
import { X, CheckCircle, AlertCircle, AlertTriangle, Info } from 'lucide-astro';

interface Props {
  toast: {
    id: string;
    message: string;
    type: 'success' | 'error' | 'warning' | 'info';
  };
}

const { toast } = Astro.props;

const icons = {
  success: CheckCircle,
  error: AlertCircle,
  warning: AlertTriangle,
  info: Info,
};

const colors = {
  success: 'bg-green-500',
  error: 'bg-red-500',
  warning: 'bg-yellow-500',
  info: 'bg-blue-500',
};

const Icon = icons[toast.type];
---

<div
  id={`toast-${toast.id}`}
  class="fixed top-4 right-4 z-50 flex items-center gap-3 p-4 text-white rounded-lg shadow-lg transform transition-all duration-300 ease-in-out translate-x-full opacity-0 {colors[toast.type]}"
  role="alert"
  aria-live="polite"
>
  <Icon class="w-5 h-5 flex-shrink-0" />
  <p class="text-sm font-medium">{toast.message}</p>
  <button
    type="button"
    class="ml-4 text-white/70 hover:text-white transition-colors"
    onclick="document.getElementById('toast-{toast.id}').remove()"
    aria-label="Close notification"
  >
    <X class="w-4 h-4" />
  </button>
</div>

<script>
  // Animate in
  setTimeout(() => {
    const toast = document.getElementById(`toast-{toast.id}`);
    if (toast) {
      toast.classList.remove('translate-x-full', 'opacity-0');
      toast.classList.add('translate-x-0', 'opacity-100');
    }
  }, 100);
</script>